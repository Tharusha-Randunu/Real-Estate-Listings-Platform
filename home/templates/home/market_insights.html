<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Market Insights - Sri Lanka Real Estate</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background: #f9f9f9;
            color: #333;
        }
        nav {
            background: #006400;
            padding: 15px 30px;
            position: sticky;
            top: 0;
            z-index: 1000;
            display: flex;
            gap: 20px;
        }
        nav a {
            color: #fff;
            text-decoration: none;
            font-weight: 600;
            transition: color 0.3s;
        }
        nav a:hover {
            color: #ffd700;
        }
        section {
            padding: 60px 30px;
            border-bottom: 1px solid #ddd;
            background: #fff;
        }
        h2 {
            color: #006400;
            margin-bottom: 10px;
        }
        p {
            font-size: 1.1em;
            max-width: 800px;
        }
    </style>
</head>
<body>

<nav>
    <a href="#overview">Overview</a>
    <a href="#price-meter">Price Meter</a>
    <a href="#buying-guide">Buying Guide</a>
    <a href="#capital-gains">Capital Gains</a>
    <a href="#outlook">Market Outlook</a>
    <a href="#news">News</a>
</nav>

<section id="overview">
    <h2>Market Insights Overview</h2>
    <p>Discover key trends and ROI forecasts in Sri Lanka’s dynamic real estate sector. Gain insights to make smarter investments.</p>
</section>

<section id="price-meter" style="text-align:center;padding:50px 20px;background:#fff;">
    <h2 style="color:#006400;">Market Value</h2>
    <p>Enter your property details to check if your price is fair.</p>

    <div style="max-width:500px;margin:20px auto;">
        <select id="propertyType" style="width:100%;padding:10px;margin:8px 0;border:1px solid #ccc;border-radius:5px;">
            <option value="">Select Property Type</option>
            <option value="apartment">Apartment</option>
            <option value="house">House</option>
            <option value="land">Land</option>
        </select>

        <input type="text" id="location" placeholder="Location (e.g. Colombo 7)"
               style="width:100%;padding:10px;margin:8px 0;border:1px solid #ccc;border-radius:5px;">

        <input type="number" id="floorArea" placeholder="Floor area (sqft)"
               style="width:100%;padding:10px;margin:8px 0;border:1px solid #ccc;border-radius:5px;">

        <input type="number" id="totalPrice" placeholder="Total price (LKR)"
               style="width:100%;padding:10px;margin:8px 0;border:1px solid #ccc;border-radius:5px;">

        <button onclick="calculateMarketValue()"
                style="width:100%;padding:12px;background:#008000;color:white;border:none;border-radius:5px;margin-top:10px;font-weight:bold;">
            Check Now
        </button>
    </div>

    <div style="max-width:450px;margin:40px auto;">
        <canvas id="marketGauge" width="400" height="200"></canvas>
        <div style="display:flex;justify-content:space-between;margin-top:10px;font-size:14px;">
            <span>Too Low</span><span>Low</span><span>High</span><span>Too High</span>
        </div>
    </div>
</section>

<script>
function drawGauge(percentage) {
    const canvas = document.getElementById('marketGauge');
    const ctx = canvas.getContext('2d');
    const w = canvas.width, h = canvas.height;

    ctx.clearRect(0, 0, w, h);

    // Draw background arc
    ctx.beginPath();
    ctx.lineWidth = 25;
    ctx.strokeStyle = '#eee';
    ctx.arc(w/2, h, w/2 - 20, Math.PI, 2 * Math.PI);
    ctx.stroke();

    // Gradient from Red -> Green
    const grad = ctx.createLinearGradient(20, 0, w - 20, 0);
    grad.addColorStop(0, '#D32F2F');      // Red
    grad.addColorStop(0.25, '#FBC02D');   // Yellow
    grad.addColorStop(0.5, '#388E3C');    // Green
    grad.addColorStop(0.75, '#FBC02D');   // Yellow
    grad.addColorStop(1, '#D32F2F');      // Red

    ctx.beginPath();
    ctx.lineWidth = 25;
    ctx.strokeStyle = grad;
    ctx.arc(w/2, h, w/2 - 20, Math.PI, Math.PI + (Math.PI * percentage / 100));
    ctx.stroke();

    // Draw Needle
    const angle = Math.PI + Math.PI * percentage / 100;
    const needleLength = w / 2 - 35;
    const needleX = w / 2 + needleLength * Math.cos(angle);
    const needleY = h + needleLength * Math.sin(angle);

    ctx.beginPath();
    ctx.moveTo(w/2, h);
    ctx.lineTo(needleX, needleY);
    ctx.lineWidth = 4;
    ctx.strokeStyle = '#333';
    ctx.stroke();

    // Needle Base
    ctx.beginPath();
    ctx.arc(w/2, h, 10, 0, 2 * Math.PI);
    ctx.fillStyle = '#333';
    ctx.fill();
}

function calculateMarketValue() {
    const type = document.getElementById('propertyType').value;
    const location = document.getElementById('location').value.trim().toLowerCase();
    const area = parseFloat(document.getElementById('floorArea').value);
    const price = parseFloat(document.getElementById('totalPrice').value);

    if (!type || !location || !area || !price) {
        alert("Please fill all the fields.");
        return;
    }

    // Example logic (replace with real DB / API logic)
    let marketAverage = 10000;
    if (location.includes('colombo')) {
        marketAverage = (type === 'apartment') ? 35000 : 30000;
    } else if (location.includes('kandy')) {
        marketAverage = 18000;
    }

    const pricePerSqft = price / area;
    const ratio = pricePerSqft / marketAverage;
    const percentage = Math.min(Math.max(ratio * 50, 0), 100);

    drawGauge(percentage);
}

// Draw empty state
drawGauge(0);
</script>



<section id="buying-guide">
    <h2>Property Buying Guide</h2>
    <p>Learn the step-by-step process to legally and securely purchase property in Sri Lanka, tailored for local and international buyers.</p>
</section>

<section id="capital-gains">
    <h2>Capital Gains Tax</h2>
    <p>Understand how Capital Gains Tax applies to real estate, including recent policy updates and practical tips for compliance.</p>
</section>

<section id="outlook">
    <h2>Market Outlook</h2>
    <p>Explore the latest annual report analyzing residential and commercial property trends, forecasts, and economic impacts.</p>
</section>

<section id="news">
    <h2>Real Estate News</h2>
    <p>Stay updated with expert insights, policy changes, and emerging opportunities in Sri Lanka’s real estate market.</p>
</section>

</body>
</html>
