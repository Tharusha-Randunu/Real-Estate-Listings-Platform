<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Market Insights - Sri Lanka Real Estate</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background: #f9f9f9;
            color: #333;
        }
        nav {
            background: #006400;
            padding: 15px 30px;
            position: sticky;
            top: 0;
            z-index: 1000;
            display: flex;
            gap: 20px;
        }
        nav a {
            color: #fff;
            text-decoration: none;
            font-weight: 600;
            transition: color 0.3s;
        }
        nav a:hover {
            color: #ffd700;
        }
        section {
            padding: 60px 30px;
            border-bottom: 1px solid #ddd;
            background: #fff;
        }
        h2 {
            color: #006400;
            margin-bottom: 10px;
        }
        p {
            font-size: 1.1em;
            max-width: 800px;
        }
    </style>
</head>
<body>

<nav>
    <a href="#overview">Overview</a>
    <a href="#price-meter">Price Meter</a>
    <a href="#buying-guide">Buying Guide</a>
    <a href="#capital-gains">Capital Gains</a>
    <a href="#outlook">Market Outlook</a>
    <a href="#news">News</a>
</nav>

<section id="overview">
    <h2>Market Insights Overview</h2>
    <p>Discover key trends and ROI forecasts in Sri Lanka’s dynamic real estate sector. Gain insights to make smarter investments.</p>
</section>

<section id="price-meter" style="text-align:center;padding:50px 20px;background:#fff;">
    <h2 style="color:#006400;">Market Value</h2>
    <p>Enter your property details to see how your price compares to market trends.</p>

    <div style="max-width:500px;margin:20px auto;">
        <select id="propertyType" style="width:100%;padding:10px;margin:8px 0;border:1px solid #ccc;border-radius:5px;">
            <option value="">Select Property Type</option>
            <option value="apartment">Apartment</option>
            <option value="house">House</option>
            <option value="land">Land</option>
        </select>

        <input type="text" id="location" placeholder="Location (e.g. Colombo 7)"
               style="width:100%;padding:10px;margin:8px 0;border:1px solid #ccc;border-radius:5px;">

        <input type="number" id="floorArea" placeholder="Floor area (sqft)"
               style="width:100%;padding:10px;margin:8px 0;border:1px solid #ccc;border-radius:5px;">

        <input type="number" id="totalPrice" placeholder="Total price (LKR)"
               style="width:100%;padding:10px;margin:8px 0;border:1px solid #ccc;border-radius:5px;">

        <button onclick="calculateMarketValue()"
                style="width:100%;padding:12px;background:#008000;color:white;border:none;border-radius:5px;margin-top:10px;font-weight:bold;">
            Check Now
        </button>
    </div>

    <div style="max-width:450px;margin:40px auto;">
        <canvas id="marketGauge" width="400" height="200"></canvas>
        <div id="gaugeLabel" style="margin-top:15px;font-size:18px;font-weight:bold;color:#333;"></div>
    </div>
</section>

<script>
function drawGauge(percentage) {
    const canvas = document.getElementById('marketGauge');
    const ctx = canvas.getContext('2d');
    const w = canvas.width, h = canvas.height;

    // Clear canvas
    ctx.clearRect(0, 0, w, h);

    // Background arc (grey guide)
    ctx.beginPath();
    ctx.lineWidth = 25;
    ctx.strokeStyle = '#eee';
    ctx.arc(w/2, h, w/2 - 20, Math.PI, 2 * Math.PI);
    ctx.stroke();

    // Gradient arc
    let grad = ctx.createLinearGradient(20, 0, w-20, 0);
    grad.addColorStop(0, '#e53935'); // Red
    grad.addColorStop(0.25, '#ffb300'); // Orange
    grad.addColorStop(0.5, '#cddc39'); // Lime
    grad.addColorStop(0.75, '#7cb342'); // Olive
    grad.addColorStop(1, '#388e3c'); // Dark Green

    ctx.beginPath();
    ctx.lineWidth = 25;
    ctx.strokeStyle = grad;
    ctx.arc(w/2, h, w/2 - 20, Math.PI, Math.PI + (Math.PI * percentage/100));
    ctx.stroke();

    // Needle
    let angle = Math.PI + (Math.PI * percentage / 100);
    let radius = w/2 - 35;
    let needleX = w/2 + radius * Math.cos(angle);
    let needleY = h + radius * Math.sin(angle);

    ctx.beginPath();
    ctx.moveTo(w/2, h);
    ctx.lineTo(needleX, needleY);
    ctx.lineWidth = 5;
    ctx.strokeStyle = '#333';
    ctx.stroke();

    // Needle base
    ctx.beginPath();
    ctx.arc(w/2, h, 10, 0, 2 * Math.PI);
    ctx.fillStyle = '#333';
    ctx.fill();
}

function calculateMarketValue() {
    let type = document.getElementById('propertyType').value;
    let location = document.getElementById('location').value.trim().toLowerCase();
    let area = parseFloat(document.getElementById('floorArea').value);
    let price = parseFloat(document.getElementById('totalPrice').value);

    if (!type || !location || !area || !price) {
        alert("Please fill in all fields.");
        return;
    }

    let pricePerSqft = price / area;

    // Basic sample market range (adjust to your real data later!)
    let expected = location.includes('colombo') ?
        (type === 'apartment' ? 35000 : 30000) :
        (location.includes('kandy') ? 18000 : 12000);

    let percentage = Math.min(Math.max((pricePerSqft / expected) * 50, 0), 100);

    drawGauge(percentage);

    let label = document.getElementById('gaugeLabel');
    if (percentage < 20) label.textContent = "Too Low";
    else if (percentage < 40) label.textContent = "Low";
    else if (percentage < 60) label.textContent = "Fair";
    else if (percentage < 80) label.textContent = "High";
    else label.textContent = "Too High";
}

// Initial empty gauge
drawGauge(0);
</script>


<section id="buying-guide">
    <h2>Property Buying Guide</h2>
    <p>Learn the step-by-step process to legally and securely purchase property in Sri Lanka, tailored for local and international buyers.</p>
</section>

<section id="capital-gains">
    <h2>Capital Gains Tax</h2>
    <p>Understand how Capital Gains Tax applies to real estate, including recent policy updates and practical tips for compliance.</p>
</section>

<section id="outlook">
    <h2>Market Outlook</h2>
    <p>Explore the latest annual report analyzing residential and commercial property trends, forecasts, and economic impacts.</p>
</section>

<section id="news">
    <h2>Real Estate News</h2>
    <p>Stay updated with expert insights, policy changes, and emerging opportunities in Sri Lanka’s real estate market.</p>
</section>

</body>
</html>
